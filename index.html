<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Maybank AM Giveaway</title>
  <style>
    :root{
      --bg: #fafaf9;
      --card: #ffffff;
      --ink: #0f172a;
      --muted: #64748b;
      --border: rgba(15,23,42,0.08);
      --shadow: 0 20px 50px rgba(15,23,42,0.08);
      --maybank: #FFC629;
      --maybank-dark: #E6B424;
      --accent: #0f172a;
      --yes: #10b981;
      --no: #ef4444;
      --btn: #f8fafc;
      --btnHover:#f1f5f9;
    }
    *{ box-sizing:border-box; margin:0; padding:0; }
    body{
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(180deg, #fafaf9 0%, #f5f5f4 100%);
      color: var(--ink);
      min-height:100vh;
      line-height: 1.6;
    }
    .header{
      background: var(--maybank);
      border-bottom: 2px solid var(--maybank-dark);
      box-shadow: 0 4px 20px rgba(255,198,41,0.15);
    }
    .headerInner{
      width:min(1200px, 100%);
      margin:0 auto;
      padding: 20px 24px;
      display:flex;
      align-items:center;
      gap:20px;
    }
    .logo{ height: 56px; width: auto; display:block; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)); }
    .headerTitle{ font-weight: 800; font-size: 28px; letter-spacing: -0.5px; line-height: 1.2; color: var(--accent); }
    .headerTitle small{ display:block; font-weight:600; font-size: 14px; margin-top: 4px; opacity:0.75; }
    .wrap{
      width:min(1200px, 100%);
      margin: 32px auto 48px auto;
      padding: 0 24px;
      display:grid;
      grid-template-columns: 1.3fr 1fr;
      gap: 28px;
      align-items:start;
    }
    @media (max-width: 1000px){ .wrap{ grid-template-columns: 1fr; } .logo{ height: 48px; } }
    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 24px;
      box-shadow: var(--shadow);
      padding: 32px;
      transition: box-shadow 0.3s ease;
    }
    .title{ margin: 0 0 12px 0; font-size: 32px; font-weight: 800; letter-spacing: -0.8px; color: var(--accent); }
    .sub{ margin: 0 0 24px 0; color: var(--muted); font-size: 15px; }
    .qPanel{
  border-radius: 20px;
  overflow: hidden;
  border: 2px solid rgba(15,23,42,0.15);
  background: #ffffff;
  min-height: 240px;
  display:flex;
  flex-direction: column;
}
/* Yellow header inside question box */
.qTopRow{
  background: var(--maybank);
  border-bottom: 2px solid var(--maybank-dark);
  padding: 14px 18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.qLabel{
  font-size: 15px;
  font-weight: 800;
  color: #111827;
}

.qCounter{
  font-size: 13px;
  font-weight: 800;
  padding: 6px 12px;
  border-radius: 999px;
  background: transparent;
  border: none;
  color: #111827;
}


/* White body */
.qText{
  padding: 22px 24px;
  font-size: 24px;
  font-weight: 600;
  color: #111827;   /* black text */
}
    .btnRow{ display:grid; grid-template-columns: 1.5fr 1fr 1fr; gap: 16px; margin-top: 24px; }
    @media (max-width: 680px){ .btnRow{ grid-template-columns: 1fr; } }
    button{
      appearance:none; border: 2px solid transparent; background: var(--btn); color: var(--ink);
      padding: 18px 24px; border-radius: 14px; cursor:pointer; font-weight: 700; font-size: 17px;
      transition: all 0.2s ease; font-family: inherit;
    }
    button:hover{ transform: translateY(-2px); box-shadow: 0 8px 20px rgba(15,23,42,0.12); }
    button:disabled{ opacity: 0.4; cursor:not-allowed; transform:none; }
    .btnPick{ background: var(--maybank); color: var(--accent); font-weight: 800; }
    .btnYes{ background: var(--yes); color: #fff; }
    .btnNo{ background: var(--no); color: #fff; }
    .wheelWrap{ display:flex; flex-direction: column; align-items: center; gap: 20px; }
    .pointer{
      width: 0; height: 0; border-left: 18px solid transparent; border-right: 18px solid transparent;
      border-top: 28px solid var(--accent); z-index: 10; margin-bottom: -15px;
    }
    canvas{ width: 100%; max-width: 380px; aspect-ratio: 1 / 1; border-radius: 999px; border: 4px solid var(--accent); }
    .spinBtn{ background: var(--accent); color: #FFC629; width: 100%; max-width: 280px; }
    .giftResult{ width: 100%; max-width: 320px; border: 2px solid var(--border); background: #f8fafc; border-radius: 16px; padding: 20px; text-align:center; }
    .giftLabel{ font-size: 12px; color: var(--muted); font-weight: 700; text-transform: uppercase; }
    .giftName{ font-size: 24px; font-weight: 800; color: var(--accent); }
    
    /* Modal */
    .modalBackdrop{ position: fixed; inset: 0; background: rgba(15,23,42,0.75); backdrop-filter: blur(4px); display:none; place-items:center; padding: 24px; z-index: 100; }
    .modalBackdrop.show{ display:grid; }
    .modalCard{ width: min(500px, 100%); background: white; border-radius: 28px; padding: 40px; text-align:center; }
    .modalTitle{ font-size: 32px; font-weight: 900; margin-bottom: 15px; }
    .modalBody{ font-size: 18px; margin-bottom: 25px; }
    .modalOk{ background: var(--accent); color: white; padding: 12px 40px; border-radius: 10px; }
  </style>
</head>
<body>
  <header class="header">
  <div class="headerInner">
    <img 
      src="maybank-logo.png" 
      alt="Maybank Asset Management" 
      class="logo"
    />
  </div>
</header>

  <main class="wrap">
    <section class="card">
      <h1 class="title">Question Randomizer</h1>
      <p class="sub">Press <b>Yes</b> if the statement is TRUE. Press <b>No</b> if it is FALSE.</p>
      <div class="qPanel">
  <div class="qTopRow">
    <div class="qLabel">Current Question</div>
    <div class="qCounter" id="qCounter">Q 0/15</div>
  </div>
  <p class="qText" id="questionText">Click 'Pick Random Question' to start.</p>
</div>
      <div class="btnRow">
        <button class="btnPick" id="btnPick">Pick Random Question</button>
        <button class="btnYes" id="btnYes" disabled>Yes</button>
        <button class="btnNo" id="btnNo" disabled>No</button>
      </div>
    </section>

    <section class="card">
      <div class="wheelWrap">
        <div class="pointer"></div>
        <canvas id="wheel" width="800" height="800"></canvas>
        <button class="spinBtn" id="btnSpin" disabled>Spin Wheel</button>
        <div class="giftResult">
          <p class="giftLabel">Gift Result</p>
          <p class="giftName" id="giftName">‚Äî</p>
        </div>
        <button style="font-size:12px; background:none; box-shadow:none;" id="btnReset">Reset for Next User</button>
      </div>
    </section>
  </main>

  <div class="modalBackdrop" id="modalBackdrop">
    <div class="modalCard">
      <div class="modalTitle" id="modalTitle">‚Äî</div>
      <div class="modalBody" id="modalBody">‚Äî</div>
      <button class="modalOk" id="btnModalOk">OK</button>
    </div>
  </div>

<script>
const QUESTIONS = [
  { text: "The MAMG Gold Fund invests directly in physical gold.", correctYes: true },

{ text: "The Maybank Malaysia Sukuk Fund currently targets an annual yield of around 4%.", correctYes: true },

{ text: "The MAMG Systematic Asia Pacific Equity Absolute Return Fund aims to deliver absolute returns regardless of market conditions.", correctYes: true },

{ text: "The Maybank Global Technology-I Fund provides exposure to global technology companies while remaining fully Shariah-compliant.", correctYes: true },

{ text: "The Maybank Global Technology-I Fund offers diversified exposure across multiple technology sub-sectors.", correctYes: true },

{ text: "The Maybank Malaysia Value Fund targets stocks trading significantly below intrinsic value with a medium-term investment horizon.", correctYes: true },

{ text: "The Maybank AsiaPac ex-Japan Equity-I Fund provides equity exposure across key Asian markets such as India, China, South Korea, and Malaysia.", correctYes: true },

{ text: "The MAMG Global Dividend Fund invests in the JPMorgan Investment Funds ‚Äì Global Dividend Fund to pursue income generation and capital appreciation and pays out dividends quarterly.", correctYes: true },

{ text: "The MAMG Gold Fund offers a MYR-hedged share class to help manage currency risk.", correctYes: true },

{ text: "The MAMG Systematic Asia Pacific Equity Absolute Return Fund seeks to capture alpha through systematic investment strategies.", correctYes: true },

{ text: "The Maybank Global Technology-I Fund has delivered a return of 14.5% since inception.", correctYes: true },

{ text: "The MAMG Global Dividend Fund provides exposure to U.S. banking stocks that performed strongly in the previous year.", correctYes: true },

{ text: "The MAMG Systematic Asia Pacific Equity Absolute Return Fund leverages BlackRock‚Äôs proprietary systematic platform to analyse and select from a universe of over 2,000 stocks.", correctYes: true },

{ text: "The Maybank Malaysia Value Fund has exposure to sectors such as Industrials, Construction, and Information Technology.", correctYes: true },

{ text: "The Maybank AsiaPac ex-Japan Equity-I Fund is ranked #1 among Islamic equity funds over a three-year period on the FSMOne platform.", correctYes: true },
];

const GIFTS = [
  { name: "Woven Bag", color: "#fef3c7" },
{ name: "Woven Bag", color: "#fef3c7" },
  { name: "Jute Bag", color: "#FFC629" }
];

const el = (id) => document.getElementById(id);
const ui = {
  questionText: el("questionText"),
  btnPick: el("btnPick"),
  btnYes: el("btnYes"),
  btnNo: el("btnNo"),
  wheel: el("wheel"),
  btnSpin: el("btnSpin"),
  giftName: el("giftName"),
  btnReset: el("btnReset"),
  modalBackdrop: el("modalBackdrop"),
  modalTitle: el("modalTitle"),
  modalBody: el("modalBody"),
  btnModalOk: el("btnModalOk")
};

function scrollToWheel(){
  document.getElementById("wheel").scrollIntoView({ behavior: "smooth", block: "center" });
}

function scrollToQuestion(){
  document.getElementById("questionText").scrollIntoView({ behavior: "smooth", block: "center" });
}

const ctx = ui.wheel.getContext("2d");
// Center logo (Maybank mark)
const centerLogo = new Image();
centerLogo.src = "maybank-mark.png";
centerLogo.onload = () => drawWheel(state.rotation);
let state = { currentQuestion: null, answered: false, wheelEnabled: false, spinning: false, rotation: 0 };

function initWheelCanvas() {
  // If you already have your own resize/fit function, call it here instead.
  // This ensures the canvas has a real size before drawing.
  const canvas = ui.wheel;

  // If your HTML already sets width/height attributes, you can remove this block.
  // Otherwise, this makes canvas match its CSS size.
  const rect = canvas.getBoundingClientRect();
  const dpr = window.devicePixelRatio || 1;

  canvas.width  = Math.round(rect.width * dpr);
  canvas.height = Math.round(rect.height * dpr);

  ctx.setTransform(dpr, 0, 0, dpr, 0, 0); // so drawing uses CSS pixels

  drawWheel(0); // ‚úÖ draw immediately (logo appears too)
}

function drawWheel(rotationRad) {
  const dpr = window.devicePixelRatio || 1;

  // Because we setTransform(dpr,0,0,dpr,0,0), draw in CSS pixels:
  const w = ui.wheel.width / dpr;
  const h = ui.wheel.height / dpr;

  const cx = w / 2;
  const cy = h / 2;

  // Auto-fit radius to canvas (fixes the ‚Äúclose up‚Äù issue)
  const radius = Math.min(cx, cy) - 12;

  ctx.clearRect(0, 0, w, h);

  ctx.save();
  ctx.translate(cx, cy);
  ctx.rotate(rotationRad);

  const n = GIFTS.length;
  const slice = (Math.PI * 2) / n;

  for (let i = 0; i < n; i++) {
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.arc(0, 0, radius, i * slice, (i + 1) * slice);
    ctx.fillStyle = GIFTS[i].color;
    ctx.fill();
    ctx.strokeStyle = "rgba(17,24,39,0.25)";
    ctx.lineWidth = 2;
    ctx.stroke();

    // Gift text
    ctx.save();
    ctx.rotate(i * slice + slice / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#000";
    ctx.font = "bold 12px Arial";
    ctx.fillText(GIFTS[i].name, radius - 18, 8);
    ctx.restore();
  }

  // --- Center logo badge (always visible) ---
  const badgeR = Math.max(28, radius * 0.12);

  // White badge circle
  ctx.save();
  ctx.beginPath();
  ctx.arc(0, 0, badgeR + 6, 0, Math.PI * 2);
  ctx.fillStyle = "#ffffff";
  ctx.fill();

  // Outline
  ctx.lineWidth = 2;
  ctx.strokeStyle = "rgba(17,24,39,0.35)";
  ctx.stroke();

  // Draw logo (if loaded)
  if (centerLogo.complete && centerLogo.naturalWidth > 0) {
    ctx.drawImage(centerLogo, -badgeR, -badgeR, badgeR * 2, badgeR * 2);
  }
  ctx.restore();
  // --- end center logo badge ---

  ctx.restore();
}

function showModal(title, body) {
  ui.modalTitle.textContent = title;
  ui.modalBody.textContent = body;
  ui.modalBackdrop.classList.add("show");
}

let remaining = [];
let qIndex = 0;

function initPool(){
  remaining = [...QUESTIONS.keys()];
  qIndex = 0;
  const qCounterEl = document.getElementById("qCounter");
  if (qCounterEl) qCounterEl.textContent = `Q 0/${QUESTIONS.length}`;
}

function pickRandomQuestionNoRepeat(){
  if (remaining.length === 0){
    initPool();
  }
  const r = Math.floor(Math.random() * remaining.length);
  const idx = remaining.splice(r,1)[0];

  state.currentQuestion = QUESTIONS[idx];
  qIndex += 1;

  const qCounterEl = document.getElementById("qCounter");
  if (qCounterEl) qCounterEl.textContent = `Q ${qIndex}/${QUESTIONS.length}`;

  ui.questionText.textContent = state.currentQuestion.text;
  ui.btnYes.disabled = false;
  ui.btnNo.disabled = false;
  ui.btnPick.disabled = true;
  ui.btnSpin.disabled = true;
  state.wheelEnabled = false;
}

ui.btnPick.onclick = () => {
  pickRandomQuestionNoRepeat();
};
function handleAnswer(isYes) {
  const correct = isYes === state.currentQuestion.correctYes;
  ui.btnYes.disabled = ui.btnNo.disabled = true;
  ui.btnSpin.disabled = false;
  setTimeout(scrollToWheel, 150);
  state.wheelEnabled = true;
  correct ? showModal("Correct! üéâ", "Now spin the wheel!") : showModal("Oops! üòä", "Don't worry, you can still spin!");
}

ui.btnYes.onclick = () => handleAnswer(true);
ui.btnNo.onclick = () => handleAnswer(false);

ui.btnSpin.onclick = () => {
  if (!state.wheelEnabled || state.spinning) return;
  state.spinning = true;
  ui.btnSpin.disabled = true;
  const extraSpins = 5 + Math.random() * 5;
  const targetRotation = state.rotation + (extraSpins * Math.PI * 2);
  const duration = 2000;
  const start = performance.now();

  function animate(now) {
    const elapsed = now - start;
    const progress = Math.min(elapsed / duration, 1);
    const ease = 1 - Math.pow(1 - progress, 3);
    const current = state.rotation + (targetRotation - state.rotation) * ease;
    drawWheel(current);
    if (progress < 1) {
      requestAnimationFrame(animate);
    } else {
      state.rotation = current % (Math.PI * 2);
      state.spinning = false;
      const slice = (Math.PI * 2) / GIFTS.length;
      const normalized = (Math.PI * 1.5 - state.rotation) % (Math.PI * 2);
      const idx = Math.floor((normalized < 0 ? normalized + Math.PI * 2 : normalized) / slice);
      ui.giftName.textContent = GIFTS[idx].name;
      showModal("Winner!", `You won ${GIFTS[idx].name}!`);
ui.btnPick.disabled = false;
    }
  }
  requestAnimationFrame(animate);
};

ui.btnReset.onclick = () => {
  location.reload();
  setTimeout(scrollToQuestion, 150);
};
ui.btnModalOk.onclick = () => ui.modalBackdrop.classList.remove("show");


window.addEventListener("load", () => {
  initWheelCanvas();
  initPool();
});
</script>
</body>
</html>
